<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- ===============================================-->
    <!--    Document Title-->
    <!-- ===============================================-->
    <title>自动装配 | Final </title>

    <!-- ===============================================-->
    <!--    Favicons-->
    <!-- ===============================================-->
    <link rel="apple-touch-icon" sizes="180x180" href="https://static.ifinal.io/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://static.ifinal.io/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://static.ifinal.io/favicons/favicon-16x16.png">
<link rel="shortcut icon" type="image/x-icon" href="https://static.ifinal.io/favicons/favicon.ico">
<link rel="manifest" href="https://prium.github.io/falcon/v3.8.0/assets/img/favicons/manifest.json">
<meta name="msapplication-TileImage" content="https://prium.github.io/falcon/v3.8.0/assets/img/favicons/mstile-150x150.png">
    <meta name="theme-color" content="#ffffff">
    <script src="https://static.ifinal.io/js/config.js"></script>
    <script src="https://prium.github.io/falcon/v3.8.0/vendors/overlayscrollbars/OverlayScrollbars.min.js"></script>

    <!-- ===============================================-->
    <!--    Stylesheets-->
    <!-- ===============================================-->
    <link rel="preconnect" href="https://fonts.gstatic.com">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
<link rel="stylesheet" href="/assets/css/user.css" />
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700%7cPoppins:300,400,500,600,700,800,900&amp;display=swap" rel="stylesheet">
<link href="https://prium.github.io/falcon/v3.8.0/vendors/overlayscrollbars/OverlayScrollbars.min.css" rel="stylesheet">
<link href="https://static.ifinal.io/css/faicon-rtl.min.css" rel="stylesheet" id="style-rtl">
<link href="https://static.ifinal.io/css/faicon.min.css" rel="stylesheet" id="style-default">
<link href="https://prium.github.io/falcon/v3.8.0/assets/css/user-rtl.min.css" rel="stylesheet" id="user-style-rtl">
<link href="https://prium.github.io/falcon/v3.8.0/assets/css/user.min.css" rel="stylesheet" id="user-style-default">
<script>
    var isRTL = JSON.parse(localStorage.getItem('isRTL'));
    if (isRTL) {
        var linkDefault = document.getElementById('style-default');
        var userLinkDefault = document.getElementById('user-style-default');
        linkDefault.setAttribute('disabled', true);
        userLinkDefault.setAttribute('disabled', true);
        document.querySelector('html').setAttribute('dir', 'rtl');
    } else {
        var linkRTL = document.getElementById('style-rtl');
        var userLinkRTL = document.getElementById('user-style-rtl');
        linkRTL.setAttribute('disabled', true);
        userLinkRTL.setAttribute('disabled', true);
    }
</script>
    <!-- Markdown 主题  -->
    <link href="https://static.ifinal.io/css/markdown/orangeheart.css" rel="stylesheet"/>

    <!--  代码高亮  -->
    <link rel="stylesheet" href="https://static.ifinal.io/css/highlight/atom-one-dark.css">
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.0.1/build/highlight.min.js"></script>
    <!--GitTalk-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>

</head>
<body data-bs-spy="scroll" data-bs-target="#terms-sidebar" data-bs-offset="100" tabindex="0">
<!-- ===============================================-->
<!--    Main Content-->
<!-- ===============================================-->
<main class="main" id="app">
    <div class="container" data-layout="container">
        <script>
            var isFluid = JSON.parse(localStorage.getItem('isFluid'));
            if (isFluid) {
                var container = document.querySelector('[data-layout]');
                container.classList.remove('container');
                container.classList.add('container-fluid');
            }
        </script>
        <nav class="navbar navbar-light navbar-vertical navbar-expand-xl" id="sidebar">
    <script>
        var navbarStyle = localStorage.getItem("navbarStyle");
        if (navbarStyle && navbarStyle !== 'transparent') {
            document.querySelector('.navbar-vertical').classList.add(`navbar-${navbarStyle}`);
        }
    </script>
    <div class="d-flex align-items-center">
        <div class="toggle-icon-wrapper">
            <button class="btn navbar-toggler-humburger-icon navbar-vertical-toggle" data-bs-toggle="tooltip" data-bs-placement="left" title="" data-bs-original-title="Toggle Navigation" aria-label="Toggle Navigation"><span class="navbar-toggle-icon"><span class="toggle-line"></span></span></button>
        </div><a class="navbar-brand" href="index.html">
        <div class="d-flex align-items-center py-3"><img class="me-2" src="https://static.ifinal.io/favicons/favicon.png" alt="" width="40"><span class="font-sans-serif">final</span></div>
    </a>
    </div>
    <div class="collapse navbar-collapse" id="navbarVerticalCollapse">
        <div class="navbar-vertical-content scrollbar">
            <ul class="navbar-nav flex-column mb-3" id="navbarVerticalNav">
                <li class="nav-item" v-for="(menu1,i1) in sidebar.menus">
                    <div class="row navbar-vertical-label-wrapper mt-3 mb-2" v-if="menu1.group">
                        <div class="col-auto navbar-vertical-label" v-html="menu1.group">App</div>
                        <div class="col ps-0">
                            <hr class="mb-0 navbar-vertical-divider">
                        </div>
                    </div>
                    <a class="nav-link "
                       :class="page.menus[0] == menu1.id && !menu1.menus ? 'active' : '', menu1.menus ? 'dropdown-indicator' : ''"
                       :href=" menu1.menus ? '#' + menu1.id : menu1.url ? menu1.url : '/' + page.collection + '/'  + menu1.id " role="button"
                       :data-bs-toggle="menu1.menus ? 'collapse' : ''" :aria-expanded="page.menus[0] == menu1.id" aria-controls="dashboard">
                        <div class="d-flex align-items-center">
                            <span class="nav-link-icon material-icons text-secondary" v-html="menu1.icon">notifications</span>
                            <span class="nav-link-text ps-1" v-html="menu1.name">Dashboard</span>
                        </div>
                    </a>
                    <ul class="nav collapse"
                        :class="page.menus[0] == menu1.id ? 'show' : ''"
                        :id="menu1.id" v-if="menu1.menus" >
                        <li class="nav-item" v-for="(menu2,i2) in menu1.menus">
                            <a class="nav-link"
                               :class="page.menus[0] == menu1.id && page.menus[1] == menu2.id && !menu2.menus ? 'active' : '', menu2.menus ? 'dropdown-indicator' : ''"
                               :href="menu2.menus ? '#' + menu1.id +'--' + menu2.id : menu2.url ? menu2.url : '/' + page.collection + '/'  + menu1.id + '/' + menu2.id"
                               :data-bs-toggle="menu2.menus ? 'collapse' : ''"
                               :aria-expanded="page.menus[0] == menu1.id && page.menus[1] == menu2.id">
                                <div class="d-flex align-items-center">
                                    <span class="nav-link-text ps-1" v-html="menu2.name">Default</span>
                                </div>
                            </a>
                            <ul class="nav collapse"
                                :class="page.menus[0] == menu1.id && page.menus[1] == menu2.id ? 'show' : ''"
                                :id="menu1.id +'--' + menu2.id" v-if="menu2.menus" >
                                <li class="nav-item" v-for="(menu3,i3) in menu2.menus">
                                    <a class="nav-link"
                                       :class="page.menus[0] == menu1.id && page.menus[1] == menu2.id && page.menus[2] == menu3.id && !menu2.menus  ? 'active' : '', menu3.menus ? 'dropdown-indicator' : ''"
                                       :href="menu3.menus ? '#' + menu1.id +'--' + menu2.id + '--' + menu3.id: menu3.url ? menu3.url : '/' + page.collection + '/'  + menu1.id + '/' + menu2.id + '/' + menu3.id "
                                       :data-bs-toggle="menu3.menus ? 'collapse' : ''"
                                       :aria-expanded="page.menus[0] == menu1.id && page.menus[1] == menu2.id && page.menus[2] == menu3.id" aria-controls="level-four">
                                        <div class="d-flex align-items-center">
                                            <span class="nav-link-text ps-1" v-html="menu3.name">Item 7</span>
                                        </div>
                                    </a>
                                    <ul class="nav collapse"
                                        :class="page.menus[0] == menu1.id && page.menus[1] == menu2.id && page.menus[2] == menu3.id ? 'show' : ''"
                                        :id="menu1.id +'--' + menu2.id + '--' + menu3.id" v-if="menu3.menus" >
                                        <li class="nav-item" v-for="(menu4,i4) in menu3.menus">
                                            <a class="nav-link"
                                               :class="page.menus[0] == menu1.id && page.menus[1] == menu2.id && page.menus[2] == menu3.id && page.menus[3] == menu4.id && !menu4.menus  ? 'active' : '', menu4.menus ? 'dropdown-indicator' : ''"
                                               :href="menu3.url ? menu3.url : '/' + page.collection + '/'  + menu1.id + '/' + menu2.id + '/' + menu3.id + '/' + menu4.id "
                                                :aria-expanded="page.menus[0] == menu1.id && page.menus[1] == menu2.id && page.menus[2] == menu3.id && page.menus[3] == menu4.id" >
                                                <div class="d-flex align-items-center">
                                                    <span class="nav-link-text ps-1" v-html="menu4.name">Item 9</span>
                                                </div>
                                            </a><!-- more inner pages-->
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

        <div class="content">
            <nav id="navbar" class="navbar navbar-light navbar-glass navbar-top navbar-expand">
    <button class="btn navbar-toggler-humburger-icon navbar-toggler me-1 me-sm-3" type="button"
            data-bs-toggle="collapse" data-bs-target="#navbarVerticalCollapse" aria-controls="navbarVerticalCollapse"
            aria-expanded="false" aria-label="Toggle Navigation"><span class="navbar-toggle-icon"><span
            class="toggle-line"></span></span></button>
    <a class="navbar-brand me-1 me-sm-3" href="index.html">
        <div class="d-flex align-items-center"><img class="me-2" src="https://static.ifinal.io/favicons/favicon.png"
                                                    alt="" width="40"><span class="font-sans-serif">falcon</span></div>
    </a>
    <ul class="navbar-nav align-items-center d-none d-lg-block">
        <li class="nav-item">
            <div class="search-box" data-list="{&quot;valueNames&quot;:[&quot;title&quot;]}">
                <form class="position-relative" data-bs-toggle="search" data-bs-display="static" aria-expanded="false">
                    <input class="form-control search-input fuzzy-search" type="search" placeholder="Search..."
                           aria-label="Search">
                    <svg class="svg-inline--fa fa-search fa-w-16 search-box-icon" aria-hidden="true" focusable="false"
                         data-prefix="fas" data-icon="search" role="img" xmlns="http://www.w3.org/2000/svg"
                         viewBox="0 0 512 512" data-fa-i2svg="">
                        <path fill="currentColor"
                              d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path>
                    </svg><!-- <span class="fas fa-search search-box-icon"></span> Font Awesome fontawesome.com -->
                </form>
                <div class="btn-close-falcon-container position-absolute end-0 top-50 translate-middle shadow-none"
                     data-bs-dismiss="search">
                    <div class="btn-close-falcon" aria-label="Close"></div>
                </div>
                <div class="dropdown-menu border font-base start-0 mt-2 py-0 overflow-hidden w-100">
                    <div class="scrollbar list py-3" style="max-height: 24rem;"><h6
                            class="dropdown-header fw-medium text-uppercase px-card fs--2 pt-0 pb-2">Recently
                        Browsed</h6><a class="dropdown-item fs--1 px-card py-1 hover-primary"
                                       href="app/events/event-detail.html">
                        <div class="d-flex align-items-center">
                            <svg class="svg-inline--fa fa-circle fa-w-16 me-2 text-300 fs--2" aria-hidden="true"
                                 focusable="false" data-prefix="fas" data-icon="circle" role="img"
                                 xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
                                <path fill="currentColor"
                                      d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path>
                            </svg>
                            <!-- <span class="fas fa-circle me-2 text-300 fs--2"></span> Font Awesome fontawesome.com -->
                            <div class="fw-normal title">Pages
                                <svg class="svg-inline--fa fa-chevron-right fa-w-10 mx-1 text-500 fs--2"
                                     data-fa-transform="shrink-2" aria-hidden="true" focusable="false" data-prefix="fas"
                                     data-icon="chevron-right" role="img" xmlns="http://www.w3.org/2000/svg"
                                     viewBox="0 0 320 512" data-fa-i2svg="" style="transform-origin: 0.3125em 0.5em;">
                                    <g transform="translate(160 256)">
                                        <g transform="translate(0, 0)  scale(0.875, 0.875)  rotate(0 0 0)">
                                            <path fill="currentColor"
                                                  d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"
                                                  transform="translate(-160 -256)"></path>
                                        </g>
                                    </g>
                                </svg>
                                <!-- <span class="fas fa-chevron-right mx-1 text-500 fs--2" data-fa-transform="shrink-2"></span> Font Awesome fontawesome.com -->
                                Events
                            </div>
                        </div>
                    </a><a class="dropdown-item fs--1 px-card py-1 hover-primary" href="app/e-commerce/customers.html">
                        <div class="d-flex align-items-center">
                            <svg class="svg-inline--fa fa-circle fa-w-16 me-2 text-300 fs--2" aria-hidden="true"
                                 focusable="false" data-prefix="fas" data-icon="circle" role="img"
                                 xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
                                <path fill="currentColor"
                                      d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path>
                            </svg>
                            <!-- <span class="fas fa-circle me-2 text-300 fs--2"></span> Font Awesome fontawesome.com -->
                            <div class="fw-normal title">E-commerce
                                <svg class="svg-inline--fa fa-chevron-right fa-w-10 mx-1 text-500 fs--2"
                                     data-fa-transform="shrink-2" aria-hidden="true" focusable="false" data-prefix="fas"
                                     data-icon="chevron-right" role="img" xmlns="http://www.w3.org/2000/svg"
                                     viewBox="0 0 320 512" data-fa-i2svg="" style="transform-origin: 0.3125em 0.5em;">
                                    <g transform="translate(160 256)">
                                        <g transform="translate(0, 0)  scale(0.875, 0.875)  rotate(0 0 0)">
                                            <path fill="currentColor"
                                                  d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"
                                                  transform="translate(-160 -256)"></path>
                                        </g>
                                    </g>
                                </svg>
                                <!-- <span class="fas fa-chevron-right mx-1 text-500 fs--2" data-fa-transform="shrink-2"></span> Font Awesome fontawesome.com -->
                                Customers
                            </div>
                        </div>
                    </a>
                        <hr class="bg-200 dark__bg-900">
                        <h6 class="dropdown-header fw-medium text-uppercase px-card fs--2 pt-0 pb-2">Suggested
                            Filter</h6><a class="dropdown-item px-card py-1 fs-0" href="app/e-commerce/customers.html">
                            <div class="d-flex align-items-center"><span
                                    class="badge fw-medium text-decoration-none me-2 badge-soft-warning">customers:</span>
                                <div class="flex-1 fs--1 title">All customers list</div>
                            </div>
                        </a><a class="dropdown-item px-card py-1 fs-0" href="app/events/event-detail.html">
                            <div class="d-flex align-items-center"><span
                                    class="badge fw-medium text-decoration-none me-2 badge-soft-success">events:</span>
                                <div class="flex-1 fs--1 title">Latest events in current month</div>
                            </div>
                        </a><a class="dropdown-item px-card py-1 fs-0" href="app/e-commerce/product/product-grid.html">
                            <div class="d-flex align-items-center"><span
                                    class="badge fw-medium text-decoration-none me-2 badge-soft-info">products:</span>
                                <div class="flex-1 fs--1 title">Most popular products</div>
                            </div>
                        </a>
                        <hr class="bg-200 dark__bg-900">
                        <h6 class="dropdown-header fw-medium text-uppercase px-card fs--2 pt-0 pb-2">Files</h6><a
                                class="dropdown-item px-card py-2" href="#!">
                            <div class="d-flex align-items-center">
                                <div class="file-thumbnail me-2"><img class="border h-100 w-100 fit-cover rounded-3"
                                                                      src="assets/img/products/3-thumb.png" alt="">
                                </div>
                                <div class="flex-1">
                                    <h6 class="mb-0 title">iPhone</h6>
                                    <p class="fs--2 mb-0 d-flex"><span class="fw-semi-bold">Antony</span><span
                                            class="fw-medium text-600 ms-2">27 Sep at 10:30 AM</span></p>
                                </div>
                            </div>
                        </a><a class="dropdown-item px-card py-2" href="#!">
                            <div class="d-flex align-items-center">
                                <div class="file-thumbnail me-2"><img class="img-fluid" src="assets/img/icons/zip.png"
                                                                      alt=""></div>
                                <div class="flex-1">
                                    <h6 class="mb-0 title">Falcon v1.8.2</h6>
                                    <p class="fs--2 mb-0 d-flex"><span class="fw-semi-bold">John</span><span
                                            class="fw-medium text-600 ms-2">30 Sep at 12:30 PM</span></p>
                                </div>
                            </div>
                        </a>
                        <hr class="bg-200 dark__bg-900">
                        <h6 class="dropdown-header fw-medium text-uppercase px-card fs--2 pt-0 pb-2">Members</h6><a
                                class="dropdown-item px-card py-2" href="pages/user/profile.html">
                            <div class="d-flex align-items-center">
                                <div class="avatar avatar-l status-online me-2">
                                    <img class="rounded-circle" src="assets/img/team/1.jpg" alt="">
                                </div>
                                <div class="flex-1">
                                    <h6 class="mb-0 title">Anna Karinina</h6>
                                    <p class="fs--2 mb-0 d-flex">Technext Limited</p>
                                </div>
                            </div>
                        </a><a class="dropdown-item px-card py-2" href="pages/user/profile.html">
                            <div class="d-flex align-items-center">
                                <div class="avatar avatar-l me-2">
                                    <img class="rounded-circle" src="assets/img/team/2.jpg" alt="">
                                </div>
                                <div class="flex-1">
                                    <h6 class="mb-0 title">Antony Hopkins</h6>
                                    <p class="fs--2 mb-0 d-flex">Brain Trust</p>
                                </div>
                            </div>
                        </a><a class="dropdown-item px-card py-2" href="pages/user/profile.html">
                            <div class="d-flex align-items-center">
                                <div class="avatar avatar-l me-2">
                                    <img class="rounded-circle" src="assets/img/team/3.jpg" alt="">
                                </div>
                                <div class="flex-1">
                                    <h6 class="mb-0 title">Emma Watson</h6>
                                    <p class="fs--2 mb-0 d-flex">Google</p>
                                </div>
                            </div>
                        </a></div>
                    <div class="text-center mt-n3">
                        <p class="fallback fw-bold fs-1 d-none">No Result Found.</p>
                    </div>
                </div>
            </div>
        </li>
    </ul>
    <ul class="navbar-nav navbar-nav-icons ms-auto flex-row align-items-center">
        <li class="nav-item dropdown px-1">
            <a class="nav-link fa-icon-wait nine-dots p-1" id="navbarDropdownMenu" role="button"
               data-hide-on-body-scroll="data-hide-on-body-scroll" data-bs-toggle="dropdown" aria-haspopup="true"
               aria-expanded="false">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="43" viewBox="0 0 16 16" fill="none">
                    <circle cx="2" cy="2" r="2" fill="#6C6E71"></circle>
                    <circle cx="2" cy="8" r="2" fill="#6C6E71"></circle>
                    <circle cx="2" cy="14" r="2" fill="#6C6E71"></circle>
                    <circle cx="8" cy="8" r="2" fill="#6C6E71"></circle>
                    <circle cx="8" cy="14" r="2" fill="#6C6E71"></circle>
                    <circle cx="14" cy="8" r="2" fill="#6C6E71"></circle>
                    <circle cx="14" cy="14" r="2" fill="#6C6E71"></circle>
                    <circle cx="8" cy="2" r="2" fill="#6C6E71"></circle>
                    <circle cx="14" cy="2" r="2" fill="#6C6E71"></circle>
                </svg>
            </a>
            <div class="dropdown-menu dropdown-caret dropdown-menu-end dropdown-menu-card dropdown-caret-bg"
                 aria-labelledby="navbarDropdownMenu">
                <div class="card shadow-none">
                    <div class="scrollbar-overlay nine-dots-dropdown" data-simplebar="init">
                        <div class="simplebar-wrapper">
                            <div class="simplebar-mask">
                                <div class="simplebar-offset">
                                    <div class="simplebar-content-wrapper" tabindex="0" role="region"
                                         aria-label="scrollable content" style="height: auto; overflow: hidden;">
                                        <div class="simplebar-content" style="padding: 0px;">
                                            <div class="card-body px-3">
                                                <div class="row text-center gx-0 gy-0">
                                                    <div class="col-4" v-for="item in modules">
                                                        <a class="d-block hover-bg-200 px-2 py-3 rounded-3 text-center text-decoration-none"
                                                           :href="item.link" target="_blank">
                                                            <div class="avatar avatar-2xl">
                                                                <img class="rounded-circle"
                                                                     :src="item.logo"
                                                                     alt="">
                                                            </div>
                                                            <p class="mb-0 fw-medium text-800 text-truncate fs--2" v-html="item.name">
                                                                Final</p>
                                                        </a>
                                                    </div>
                                                    <div class="col-12">
                                                        <a class="btn btn-outline-primary btn-sm mt-4" href="#!">更多</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </li>
        <li class="nav-item">
            <div class="theme-control-toggle fa-icon-wait px-2"><input
                    class="form-check-input ms-0 theme-control-toggle-input" id="themeControlToggle" type="checkbox"
                    data-theme-control="theme" value="dark"><label
                    class="mb-0 theme-control-toggle-label theme-control-toggle-light" for="themeControlToggle"
                    data-bs-toggle="tooltip" data-bs-placement="left" title=""
                    data-bs-original-title="Switch to light theme" aria-label="Switch to light theme">
                <svg class="svg-inline--fa fa-sun fa-w-16 fs-0" aria-hidden="true" focusable="false" data-prefix="fas"
                     data-icon="sun" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
                     data-fa-i2svg="">
                    <path fill="currentColor"
                          d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"></path>
                </svg><!-- <span class="fas fa-sun fs-0"></span> Font Awesome fontawesome.com --></label><label
                    class="mb-0 theme-control-toggle-label theme-control-toggle-dark" for="themeControlToggle"
                    data-bs-toggle="tooltip" data-bs-placement="left" title=""
                    data-bs-original-title="Switch to dark theme" aria-label="Switch to dark theme">
                <svg class="svg-inline--fa fa-moon fa-w-16 fs-0" aria-hidden="true" focusable="false" data-prefix="fas"
                     data-icon="moon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
                     data-fa-i2svg="">
                    <path fill="currentColor"
                          d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"></path>
                </svg><!-- <span class="fas fa-moon fs-0"></span> Font Awesome fontawesome.com --></label></div>
        </li>
    </ul>
</nav>


            <div class="card mb-3">
                <div class="bg-holder d-none d-lg-block bg-card"
                     style="background-image:url(https://prium.github.io/falcon/v3.8.0/assets/img/icons/spot-illustrations/corner-4.png);"></div>
                <!--/.bg-holder-->
                <div class="card-body position-relative">
                    <div class="row">
                        <div class="col-lg-8">
                            <h3>自动装配</h3>
                            <p class="mb-0">自动装配</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row g-0">
                <div class="col-lg-10 col-sm-12 pe-lg-2">
                    <div class="card mb-3">
                        <div class="card-header bg-light">
                            <div class="row flex-between-end">
                                <div class="col-auto align-self-center">
                                    <h5 class="mb-0">正文</h5>
                                </div>
                                <div class="col-auto ms-auto">
                                    <div class="nav nav-pills nav-pills-falcon flex-grow-1" role="tablist">
                                        <button class="btn btn-sm active" data-bs-toggle="pill"
                                                data-bs-target="#dom-183aec56-ff41-4a47-9391-9aa8329f403e" type="button"
                                                role="tab" aria-controls="dom-183aec56-ff41-4a47-9391-9aa8329f403e"
                                                aria-selected="true" id="tab-dom-183aec56-ff41-4a47-9391-9aa8329f403e">
                                            Preview
                                        </button>
                                        <button class="btn btn-sm" data-bs-toggle="pill"
                                                data-bs-target="#dom-8e774ce9-785e-4d07-be4a-3673f8d22b61" type="button"
                                                role="tab" aria-controls="dom-8e774ce9-785e-4d07-be4a-3673f8d22b61"
                                                aria-selected="false" id="tab-dom-8e774ce9-785e-4d07-be4a-3673f8d22b61">
                                            Code
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">

                            <div class="tab-content">
                                <div class="tab-pane preview-tab-pane active" role="tabpanel"
                                     aria-labelledby="tab-dom-183aec56-ff41-4a47-9391-9aa8329f403e"
                                     id="dom-183aec56-ff41-4a47-9391-9aa8329f403e">
                                    <article class="markdown" id="markdown"></article>
                                </div>
                                <div class="tab-pane code-tab-pane" role="tabpanel"
                                     aria-labelledby="tab-dom-8e774ce9-785e-4d07-be4a-3673f8d22b61"
                                     id="dom-8e774ce9-785e-4d07-be4a-3673f8d22b61">
                                    <textarea id="editor" class="d-none" hidden style="width: 100%" rows="100">---
formatterOff: "@formatter:off"
title: 自动装配
subtitle: 自动装配
summary: 自动装配
categories: []
tags: []
date: 2023-03-01 13:30:18 +800
version: 1.0
formatterOn: "@formatter:on"
---

# 自动装配

使用过`Spring Boot`的同学都被其**开箱即用**的方式所折服，那么`Spring Boot`是如何实现**开箱即用**的呢？

这要归功于其强大的**自动装配**能力，本节就来一探究竟。


## @EnableAutoConfiguration

`@EnableAutoConfiguration`是Spring Boot自动装配的入口，Spring容器在启动时会检测到该注解上的`@Import`注解，
并调用`AutoConfigurationImportSelector#selectImports(AnnotationMetadata)`方法来解析需要自动装配的配置。

> 在实际的开发中，并没有显示声明`@EnableAutoConfiguration`注解，为什么自动装配也启用了呢？
> **答**：这是因为在Spring Boot的启动类上声明了`@SpringBootConfiguration`注解，而该注解被`@EnableAutoConfiguration`标记，即传递性。
>
> ```java
> ...
> @EnableAutoConfiguration
> ...
> public @interface SpringBootApplication {
> ...
> }
> ```



## AutoConfigurationImportSelector

`AutoConfigurationImportSelector`类实现了自动装配的过程，在该类的`#selectImports(AnnotationMetadata)`方法中，通过解析声明在`@EnableAutoConfiguration`注解中的配置来加载候选配置类。



候选配置类的来源有以下两种：

* `META-INF/spring.facotries`
* `META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports`

其中`spring.factories`中的候选类通过`SpringFactoriesLoader.loadFactoryNames()`进行加载，`org.springframework.boot.autoconfigure.AutoConfiguration.imports`中的候选类通过`ImportCandidates.load()`进行加载。

* getCandidateConfigurations

```java
	protected List<String> getCandidateConfigurations(AnnotationMetadata metadata, AnnotationAttributes attributes) {
		List<String> configurations = new ArrayList<>(
				SpringFactoriesLoader.loadFactoryNames(getSpringFactoriesLoaderFactoryClass(), getBeanClassLoader()));
		ImportCandidates.load(AutoConfiguration.class, getBeanClassLoader()).forEach(configurations::add);
		Assert.notEmpty(configurations,
				"No auto configuration classes found in META-INF/spring.factories nor in META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports. If you "
						+ "are using a custom packaging, make sure that file is correct.");
		return configurations;
	}
```

> **ImportCandidates**自`Spring Boot 2.7.0`开始。
</textarea>
                                    <pre><code id="code"></code></pre>
                                </div>
                            </div>

                        </div>
                        <div class="card-footer">
                            <div class="gitalk-container" id="gitalk-container"></div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 ps-lg-2 d-none d-md-inline">
                    <div class="sticky-sidebar">
                        <div class="card sticky-top">
                            <div class="card-header border-bottom">
                                <h6 class="mb-0 fs-0">目录</h6>
                            </div>
                            <div class="card-body">
                                <div class="terms-sidebar nav flex-column fs--1 doc" id="terms-sidebar">
                                    <div class="nav-item d-none">
                                        <a class="nav-link px-0 py-1" href="#account">Account</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- ===============================================-->
<!--    End of Main Content-->
<!-- ===============================================-->
<!--设置面板-->
<div class="offcanvas offcanvas-end settings-panel border-0" id="settings-offcanvas" tabindex="-1"
     aria-labelledby="settings-offcanvas">
    <div class="offcanvas-header settings-panel-header bg-shape">
        <div class="z-index-1 py-1 light">
            <div class="d-flex justify-content-between align-items-center mb-1">
                <h5 class="text-white mb-0 me-2">
                    <span class="fas fa-palette me-2 fs-0"></span>设置</h5>
                <button class="btn btn-primary btn-sm rounded-pill mt-0 mb-0" data-theme-control="reset"
                        style="font-size:12px">
                    <span class="fas fa-redo-alt me-1" data-fa-transform="shrink-3"></span>重置
                </button>
            </div>
            <p class="mb-0 fs--1 text-white opacity-75">自定义样式</p>
        </div>
        <button class="btn-close btn-close-white z-index-1 mt-0" type="button" data-bs-dismiss="offcanvas"
                aria-label="Close"></button>
    </div>
    <div class="offcanvas-body scrollbar-overlay px-card" id="themeController">
        <h5 class="fs-0">主题样式</h5>
        <p class="fs--1">选择你喜欢的主题样式</p>
        <div class="btn-group d-block w-100 btn-group-navbar-style">
            <div class="row gx-2">
                <div class="col-6">
                    <input class="btn-check" id="themeSwitcherLight" name="theme-color" type="radio" value="light"
                           data-theme-control="theme"/>
                    <label class="btn d-inline-block btn-navbar-style fs--1" for="themeSwitcherLight">
                        <span class="hover-overlay mb-2 rounded d-block">
                            <img class="img-fluid img-prototype mb-0"
                                 src="https://static.ifinal.io/images/generic/falcon-mode-default.jpg" alt=""/>
                        </span>
                        <span class="label-text">明亮</span>
                    </label>
                </div>
                <div class="col-6">
                    <input class="btn-check" id="themeSwitcherDark" name="theme-color" type="radio" value="dark"
                           data-theme-control="theme"/>
                    <label class="btn d-inline-block btn-navbar-style fs--1" for="themeSwitcherDark">
                        <span class="hover-overlay mb-2 rounded d-block">
                            <img class="img-fluid img-prototype mb-0"
                                 src="https://static.ifinal.io/images/generic/falcon-mode-dark.jpg" alt=""/>
                        </span>
                        <span class="label-text">暗黑</span>
                    </label>
                </div>
            </div>
        </div>
        <hr/>
        <div class="d-flex justify-content-between">
            <div class="d-flex align-items-start"><img class="me-2"
                                                       src="https://static.ifinal.io/images/icons/left-arrow-from-left.svg"
                                                       width="20" alt=""/>
                <div class="flex-1">
                    <h5 class="fs-0">RTL Mode</h5>
                    <p class="fs--1 mb-0">Switch your language direction </p>
                </div>
            </div>
            <div class="form-check form-switch"><input class="form-check-input ms-0" id="mode-rtl" type="checkbox"
                                                       data-theme-control="isRTL"/></div>
        </div>
        <hr/>
        <div class="d-flex justify-content-between">
            <div class="d-flex align-items-start"><img class="me-2"
                                                       src="https://static.ifinal.io/images/icons/arrows-h.svg"
                                                       width="20" alt=""/>
                <div class="flex-1">
                    <h5 class="fs-0">Fluid Layout</h5>
                    <p class="fs--1 mb-0">Toggle container layout system </p>
                </div>
            </div>
            <div class="form-check form-switch"><input class="form-check-input ms-0" id="mode-fluid" type="checkbox"
                                                       data-theme-control="isFluid"/></div>
        </div>
        <hr/>
        <div class="d-flex align-items-start"><img class="me-2" src="assets/img/icons/paragraph.svg" width="20" alt=""/>
            <div class="flex-1">
                <h5 class="fs-0 d-flex align-items-center">Navigation Position </h5>
                <p class="fs--1 mb-2">Select a suitable navigation system for your web application </p>
                <div>
                    <div class="form-check form-check-inline"><input class="form-check-input"
                                                                     id="option-navbar-vertical" type="radio"
                                                                     name="navbar" value="vertical"
                                                                     data-theme-control="navbarPosition"/><label
                            class="form-check-label" for="option-navbar-vertical">Vertical</label></div>
                    <div class="form-check form-check-inline"><input class="form-check-input" id="option-navbar-top"
                                                                     type="radio" name="navbar" value="top"
                                                                     data-theme-control="navbarPosition"/><label
                            class="form-check-label" for="option-navbar-top">Top</label></div>
                    <div class="form-check form-check-inline me-0"><input class="form-check-input"
                                                                          id="option-navbar-combo" type="radio"
                                                                          name="navbar" value="combo"
                                                                          data-theme-control="navbarPosition"/><label
                            class="form-check-label" for="option-navbar-combo">Combo</label></div>
                </div>
            </div>
        </div>
        <hr/>
        <h5 class="fs-0 d-flex align-items-center">侧边导航风格</h5>
        <p class="fs--1 mb-0">切换侧边导航风格</p>
        <div class="btn-group d-block w-100 btn-group-navbar-style">
            <div class="row gx-2">
                <div class="col-6">
                    <input class="btn-check" id="navbar-style-transparent" type="radio" name="navbarStyle"
                           value="transparent" data-theme-control="navbarStyle"/>
                    <label class="btn d-block w-100 btn-navbar-style fs--1" for="navbar-style-transparent">
                        <img class="img-fluid img-prototype" src="https://static.ifinal.io/images/generic/default.png"
                             alt=""/>
                        <span class="label-text">透明</span>
                    </label>
                </div>
                <div class="col-6">
                    <input class="btn-check" id="navbar-style-inverted" type="radio" name="navbarStyle"
                           value="inverted" data-theme-control="navbarStyle"/>
                    <label class="btn d-block w-100 btn-navbar-style fs--1" for="navbar-style-inverted">
                        <img class="img-fluid img-prototype" src="https://static.ifinal.io/images/generic/inverted.png"
                             alt=""/>
                        <span class="label-text">反色</span>
                    </label>
                </div>
                <div class="col-6">
                    <input class="btn-check" id="navbar-style-card" type="radio" name="navbarStyle"
                           value="card" data-theme-control="navbarStyle"/>
                    <label class="btn d-block w-100 btn-navbar-style fs--1" for="navbar-style-card">
                        <img class="img-fluid img-prototype" src="https://static.ifinal.io/images/generic/card.png"
                             alt=""/>
                        <span class="label-text">卡片</span>
                    </label>
                </div>
                <div class="col-6">
                    <input class="btn-check" id="navbar-style-vibrant" type="radio" name="navbarStyle"
                           value="vibrant" data-theme-control="navbarStyle"/>
                    <label class="btn d-block w-100 btn-navbar-style fs--1" for="navbar-style-vibrant">
                        <img class="img-fluid img-prototype" src="https://static.ifinal.io/images/generic/vibrant.png"
                             alt=""/>
                        <span class="label-text">活力</span>
                    </label>
                </div>
            </div>
        </div>
    </div>
</div><a class="card setting-toggle" href="#settings-offcanvas" data-bs-toggle="offcanvas">
    <div class="card-body d-flex align-items-center py-md-2 px-2 py-1">
        <div class="bg-soft-primary position-relative rounded-start" style="height:34px;width:28px">
            <div class="settings-popover"><span class="ripple"><span
                    class="fa-spin position-absolute all-0 d-flex flex-center"><span
                    class="icon-spin position-absolute all-0 d-flex flex-center"><svg width="20" height="20"
                                                                                      viewBox="0 0 20 20" fill="none"
                                                                                      xmlns="http://www.w3.org/2000/svg"><path
                    d="M19.7369 12.3941L19.1989 12.1065C18.4459 11.7041 18.0843 10.8487 18.0843 9.99495C18.0843 9.14118 18.4459 8.28582 19.1989 7.88336L19.7369 7.59581C19.9474 7.47484 20.0316 7.23291 19.9474 7.03131C19.4842 5.57973 18.6843 4.28943 17.6738 3.20075C17.5053 3.03946 17.2527 2.99914 17.0422 3.12011L16.393 3.46714C15.6883 3.84379 14.8377 3.74529 14.1476 3.3427C14.0988 3.31422 14.0496 3.28621 14.0002 3.25868C13.2568 2.84453 12.7055 2.10629 12.7055 1.25525V0.70081C12.7055 0.499202 12.5371 0.297594 12.2845 0.257272C10.7266 -0.105622 9.16879 -0.0653007 7.69516 0.257272C7.44254 0.297594 7.31623 0.499202 7.31623 0.70081V1.23474C7.31623 2.09575 6.74999 2.8362 5.99824 3.25599C5.95774 3.27861 5.91747 3.30159 5.87744 3.32493C5.15643 3.74527 4.26453 3.85902 3.53534 3.45302L2.93743 3.12011C2.72691 2.99914 2.47429 3.03946 2.30587 3.20075C1.29538 4.28943 0.495411 5.57973 0.0322686 7.03131C-0.051939 7.23291 0.0322686 7.47484 0.242788 7.59581L0.784376 7.8853C1.54166 8.29007 1.92694 9.13627 1.92694 9.99495C1.92694 10.8536 1.54166 11.6998 0.784375 12.1046L0.242788 12.3941C0.0322686 12.515 -0.051939 12.757 0.0322686 12.9586C0.495411 14.4102 1.29538 15.7005 2.30587 16.7891C2.47429 16.9504 2.72691 16.9907 2.93743 16.8698L3.58669 16.5227C4.29133 16.1461 5.14131 16.2457 5.8331 16.6455C5.88713 16.6767 5.94159 16.7074 5.99648 16.7375C6.75162 17.1511 7.31623 17.8941 7.31623 18.7552V19.2891C7.31623 19.4425 7.41373 19.5959 7.55309 19.696C7.64066 19.7589 7.74815 19.7843 7.85406 19.8046C9.35884 20.0925 10.8609 20.0456 12.2845 19.7729C12.5371 19.6923 12.7055 19.4907 12.7055 19.2891V18.7346C12.7055 17.8836 13.2568 17.1454 14.0002 16.7312C14.0496 16.7037 14.0988 16.6757 14.1476 16.6472C14.8377 16.2446 15.6883 16.1461 16.393 16.5227L17.0422 16.8698C17.2527 16.9907 17.5053 16.9504 17.6738 16.7891C18.7264 15.7005 19.4842 14.4102 19.9895 12.9586C20.0316 12.757 19.9474 12.515 19.7369 12.3941ZM10.0109 13.2005C8.1162 13.2005 6.64257 11.7893 6.64257 9.97478C6.64257 8.20063 8.1162 6.74905 10.0109 6.74905C11.8634 6.74905 13.3792 8.20063 13.3792 9.97478C13.3792 11.7893 11.8634 13.2005 10.0109 13.2005Z"
                    fill="#2A7BE4"></path></svg></span></span></span></div>
        </div>
        <small class="text-uppercase text-primary fw-bold bg-soft-primary py-2 pe-2 ps-1 rounded-end">customize</small>
    </div>
</a>


<!-- ===============================================-->
<!--    JavaScripts-->
<!-- ===============================================-->
<!-- ===============================================-->
<!--                JavaScripts                     -->
<!-- ===============================================-->
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://static.ifinal.io/js/core/popper.min.js"></script>
<script src="https://static.ifinal.io/js/core/bootstrap.min.js"></script>
<script src="https://prium.github.io/falcon/v3.8.0/vendors/anchorjs/anchor.min.js"></script>
<script src="https://prium.github.io/falcon/v3.8.0/vendors/is/is.min.js"></script>
<script src="https://prium.github.io/falcon/v3.8.0/vendors/echarts/echarts.min.js"></script>
<script src="https://prium.github.io/falcon/v3.8.0/vendors/fontawesome/all.min.js"></script>
<script src="https://prium.github.io/falcon/v3.8.0/vendors/lodash/lodash.min.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=window.scroll"></script>
<script src="https://prium.github.io/falcon/v3.8.0/vendors/list.js/list.min.js"></script>
<script src="https://static.ifinal.io/js/faicon.js"></script>
<script src="https://static.ifinal.io/js/plugins/yaml.js"></script>
<script src="https://static.ifinal.io/js/plugins/jquery.toc.js"></script>
<script src="https://static.ifinal.io/js/plugins/typed.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lazyload@2.0.0-rc.2/lazyload.js"></script>
<script src="https://cdn.jsdelivr.net/npm/showdown@1.9.1/dist/showdown.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue@3.1.4/dist/vue.global.js"></script>

<script>
  Vue.createApp({
    data() {
      return {
        page: {
          collection: "spring",
          paths: ["spring","boot","autoconfigure"],
          title: "自动装配",
          tags: [],
          menus: [],
          module: "",
        },
        modules: [{"id":"final","logo":"https://static.ifinal.io/favicons/favicon.png","name":"Final","link":"/final/overview"},{"id":"spring","logo":"/assets/logos/spring.svg","name":"Spring","link":"/spring/overview"},{"id":"mybatis","logo":"https://pic2.zhimg.com/v2-f99413bba7530972fbc05ee8bceee66e_1440w.jpg?source=172ae18b","name":"Mybatis","link":"/mybatis/overview"}],
        theme: "light",
        sidebar: {"logo":"/assets/img/logos/github.svg","name":"Final Projects","menus":[{"id":"overview","icon":"dashboard","name":"概览"},{"id":"boot","icon":"dashboard","name":"Spring Boot","menus":[{"id":"autoconfigure","name":"自动装配"}]}]},
        author: {"name":"二月半","avatar":"https://avatars.githubusercontent.com/u/26331697","position":"软件工程师","company":"多点生活","location":"成都，中国","github":"ilikly","github-follow":"https://github.com/ilikly"},
        markdown: {},
        hash: {},
        post: {},
        reload: true
      }
    },
    mounted() {
      let $this = this;
      $this.page.menus = $this.page.paths.slice(1);
    },
    methods: {
    }
  })
  .mount('#sidebar')
</script>

<script>
  Vue.createApp({
    data() {
      return {
        page: {
          collection: "spring",
          paths: ["spring","boot","autoconfigure"],
          title: "自动装配",
          tags: [],
          menus: [],
          module: "",
        },
        modules: [{"id":"final","logo":"https://static.ifinal.io/favicons/favicon.png","name":"Final","link":"/final/overview"},{"id":"spring","logo":"/assets/logos/spring.svg","name":"Spring","link":"/spring/overview"},{"id":"mybatis","logo":"https://pic2.zhimg.com/v2-f99413bba7530972fbc05ee8bceee66e_1440w.jpg?source=172ae18b","name":"Mybatis","link":"/mybatis/overview"}],
        theme: "light",
        sidebar: {"logo":"/assets/img/logos/github.svg","name":"Final Projects","menus":[{"id":"overview","icon":"dashboard","name":"概览"},{"id":"boot","icon":"dashboard","name":"Spring Boot","menus":[{"id":"autoconfigure","name":"自动装配"}]}]},
        author: {"name":"二月半","avatar":"https://avatars.githubusercontent.com/u/26331697","position":"软件工程师","company":"多点生活","location":"成都，中国","github":"ilikly","github-follow":"https://github.com/ilikly"},
        markdown: {},
        hash: {},
        post: {},
        reload: true
      }
    },
    mounted() {
      let $this = this;
      $this.page.menus = $this.page.paths.slice(1);
      $this.initMarkdown();
      $this.processYmal($this.markdown.ymal);
      $this.processContent($this.markdown.content);

      $this.toc();
      $this.highlight();
      $this.initHeader();

      var gitalk = new Gitalk({
        clientID: 'd5980c0f53133a01c696',
        clientSecret: '98ca40d7ad860c9455ae3fd04675e53b4900aa44',
        repo: 'docs.ifinal.io',
        owner: 'final-io',
        admin: ['ilikly'],
        id: location.pathname,      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    },
    methods: {

      initMarkdown() {
        let text = document.getElementById('editor').value;
        // let text = document.getElementById('code').innerText;
        // console.log(text);
        document.getElementById('code').append(text);

        this.markdown = this.parseMarkdown(text);
      },

      parseMarkdown(data) {
        let ymalStart = data.indexOf("---");
        let ymalEnd = data.indexOf("---", ymalStart + 3);
        let index = data.indexOf('#')
        console.log(`start=${ymalStart},end=${ymalEnd},index=${index}`);

        let ymal = data.substring(ymalStart + 3, ymalEnd);
        let content = data.substring(ymalEnd + 3);

        return {
          ymal: ymal,
          content: content
        }

      },

      onhashchange() {

        let hash = location.hash;

        if (hash && hash.startsWith("#/")) {
          if (this.reload) {
            this.reload = true;
            location.reload();
          }
        } else {
          location.hash = this.hash.raw;
          this.reload = false;
        }

      },
      getFileRaw() {
        let raw = `https://raw.githubusercontent.com/${this.hash.user}/Blog/main${this.hash.path}`;
        if (!raw.endsWith(".md")) {
          raw = raw + '.md';
        }
        return raw;
      },
      parseHash() {

        let $this = this;

        let hash = location.hash;
        console.log(hash);
        if (!hash || !hash.substring(1).startsWith('/')) {
          alert("未找到")
          return false;
        }

        let queryIndex = hash.indexOf('?');

        if (queryIndex > 0) {
          hash = hash.substring(0, queryIndex);
        }

        console.log(hash);

        let hashs = hash.substring(2).split('/');

        let index = hash.indexOf('/', 2);
        let path = hash.substring(index);

        $this.hash = {
          raw: location.hash,
          user: hashs[0],
          collection: hashs[1],
          path: path
        };

        console.log($this.hash);

      },
      getQueryString(name, search) {
        search = search || window.location.search.substr(1)
            || window.location.hash.split("?")[1];
        let reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        let r = search.match(reg);
        if (r != null) {
          return unescape(r[2]);
        }
        return null;
      },
      loadRaw(raw, listener) {
        $.ajax({
          url: raw,
          type: 'GET',
          success: function (data) {

            let ymalStart = data.indexOf("---");
            let ymalEnd = data.indexOf("---", ymalStart + 3);
            let index = data.indexOf('#')
            console.log(`start=${ymalStart},end=${ymalEnd},index=${index}`);

            let ymal = data.substring(ymalStart + 3, ymalEnd);
            let content = data.substring(ymalEnd + 3);

            listener(ymal, content);

          }

        });
      },
      processYmal(ymal) {

        let $this = this;

        var SexyYamlType = new jsYaml.Type('!sexy', {
          kind: 'sequence', // See node kinds in YAML spec: http://www.yaml.org/spec/1.2/spec.html#kind//
          construct: function (data) {
            return data.map(function (string) {
              return 'sexy ' + string;
            });
          }
        });

        var SEXY_SCHEMA = jsYaml.DEFAULT_SCHEMA.extend([SexyYamlType]);

        try {
          let post = jsYaml.load(ymal, {schema: SEXY_SCHEMA});
          $this.post = post;

          console.log(post);
        } catch (e) {
          console.log(e);
        }
      },
      processContent(content) {
        var converter = new showdown.Converter();
        converter.setFlavor('github');
        let html = converter.makeHtml(content);
        document.getElementById('markdown').innerHTML = html;
        // anchors.add();
      },
      toc() {
        $('#terms-sidebar').toc({
          headers: 'article h2,article h3, article h4, article h5, article h6',
          showEffect: 'slideDown',
          classes: {
            item: "nav-item",
            list: ""
          }
        });
      },
      highlight() {
        // document.querySelectorAll('pre code').forEach((block) => {
        //   hljs.highlightBlock(block);
        // });
        hljs.highlightAll();
      },
      initHeader() {
        console.log("初始化Header");
        $(".markdown h2,.markdown h3").each(function () {
          let content = $(this).text();
          $(this).html(`<span class="content">${content}</span>`)
          console.log(content);
        })
      },
      gitlak() {
        var gitalk = new Gitalk({
          clientID: 'd5980c0f53133a01c696',
          clientSecret: 'e2bc6849c786e2d037ceb624ed3789237560d206',
          repo: 'blog.ifinal.io',
          owner: 'final-gitalk',
          admin: ['ilikly'],
          id: location.pathname,      // Ensure uniqueness and length less than 50
          distractionFreeMode: false  // Facebook-like distraction free mode
        })
        //
        //gitalk.render('gitalk-container', function (data) {
        //  console.log(data);
        //});
      },
      mermaid() {
        mermaid.initialize({
          theme: 'forest',
          sequence: {
            showSequenceNumbers: true
          },
          er: {
            fontSize: 18
          }
        });
        mermaid.init({}, ".language-mermaid, .language-sequence");
      }
    }
  })
  .mount('#app')
</script>
</body>
</html>

